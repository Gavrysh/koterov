<?php ##Модель процеса-читача
$file = 'file.txt';

//Спочатку створюємо порожній файл, ЯКЩО ВІН НЕ ІСНУЄ
//Якщо файл існує, - це його не зруйнує
fclose(fopen($file, 'a+b'));

//Блокуємо файл
$f = fopen($file, 'r+b') or die('Не в змозі відкрити файл!');
flock($f, LOCK_SH); //Очикуємо на завершення процеса-письменника

//У цій точці можна бути впевненим, що у файл ніхто не пише

//Усе зроблено, знімаємо блокування
fclose($f);